(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{65:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a(20),r=a.n(s),c=a(5),o=a(16),i=a(34),l=a(35),u=a(4),j="LOGIN_SUCCESS",d="LOGIN_FAIL",m="SIGNUP_SUCCESS",p="SIGNUP_FAIL",b="ACTIVATION_SUCCESS",h="ACTIVATION_FAIL",O="LOGOUT",f="USER_LOAD_SUCCESS",x="USER_LOAD_FAIL",g={access:localStorage.getItem("access"),refresh:localStorage.getItem("refresh"),isAuthenticated:!1,login_success:!0,user:null,errors:[],successes:[]},v=function(e){var t=[];for(var a in e)t.push(e[a]);return t},y=Object(o.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case j:return localStorage.setItem("access",n.access),localStorage.setItem("refresh",n.refresh),Object(u.a)(Object(u.a)({},e),{},{isAuthenticated:!0,access:n.access,login_success:!0,refresh:n.refresh,errors:[],successes:[]});case d:return localStorage.removeItem("access"),localStorage.removeItem("refresh"),Object(u.a)(Object(u.a)({},e),{},{isAuthenticated:!1,access:null,refresh:null,login_success:!1,user:null,errors:v(n),successes:[]});case f:return Object(u.a)(Object(u.a)({},e),{},{isAuthenticated:!0,user:n,errors:[],successes:[]});case x:return Object(u.a)(Object(u.a)({},e),{},{isAuthenticated:!1,user:null,errors:v(n),successes:[]});case O:return localStorage.removeItem("access"),localStorage.removeItem("refresh"),Object(u.a)(Object(u.a)({},e),{},{access:null,refresh:null,isAuthenticated:!1,user:null,errors:[],successes:[]});case h:case p:return Object(u.a)(Object(u.a)({},e),{},{errors:v(n),successes:[]});case m:return Object(u.a)(Object(u.a)({},e),{},{errors:[],successes:["An activation email has been sent to ".concat(n)]});case b:return Object(u.a)({},e);default:return e}}}),N=[l.a],w=Object(o.createStore)(y,{},Object(i.composeWithDevTools)(o.applyMiddleware.apply(void 0,N))),S=a(8),_=a(3),A=a(13),C=a(12),I=a.n(C),k=a(17),L=a(19),E=a.n(L),F="http://localhost:8000/",T=function(){return function(){var e=Object(k.a)(I.a.mark((function e(t){var a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.getItem("access")?(a={headers:{Authorization:"JWT ".concat(localStorage.getItem("access"))}},E.a.get("".concat(F,"auth/users/me/"),a).then((function(e){t({type:f,payload:e.data})})).catch((function(e){t({type:x,payload:e.response.data})}))):t({type:x});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},U=a(0),q=Object(c.b)(null,{verify:function(e,t){return function(){var a=Object(k.a)(I.a.mark((function a(n){var s,r;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:s={headers:{"Content-Type":"application/json"}},r=JSON.stringify({uid:e,token:t}),E.a.post("".concat(F,"auth/users/activation/"),r,s).then((function(e){n({type:b})})).catch((function(e){n({type:h,payload:e.response.data})}));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.verify,a=e.match,s=Object(n.useState)(!1),r=Object(A.a)(s,2),c=r[0],o=r[1];return c?Object(U.jsx)(_.a,{to:"/"}):Object(U.jsx)("div",{className:"container",children:Object(U.jsxs)("div",{className:"d-flex flex-column justify-content-center align-items-center",style:{marginTop:"200px"},children:[Object(U.jsx)("h1",{children:"Verify your Account:"}),Object(U.jsx)("button",{onClick:function(e){var n=a.params.uid,s=a.params.token;console.log(n),console.log(s),t(n,s),o(!0)},style:{marginTop:"50px"},type:"button",className:"btn btn-primary",children:"Verify"})]})})})),P=function(){return Object(U.jsx)("div",{children:"Home"})},R=a(15),D=Object(c.b)((function(e){return{errors:e.auth.errors}}),{})((function(e){var t=e.errors;return Object(U.jsx)("ul",{className:"p-0",children:t.map((function(e){return Object(U.jsx)("li",{className:"list-group-item list-group-item-danger mb-1 my-0",children:e})}))})})),J=Object(c.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,login_success:e.auth.login_success}}),{login:function(e,t){return function(){var a=Object(k.a)(I.a.mark((function a(n){var s,r;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:s={headers:{"Content-Type":"application/json"}},r=JSON.stringify({email:e,password:t}),E.a.post("".concat(F,"auth/jwt/create"),r,s).then((function(e){n({type:j,payload:e.data}),n(T())})).catch((function(e){n({type:d,payload:e.response.data})}));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.login,a=(e.login_success,e.isAuthenticated),s=Object(n.useState)({email:"",password:""}),r=Object(A.a)(s,2),c=r[0],o=r[1],i=c.email,l=c.password,j=function(e){return o(Object(u.a)(Object(u.a)({},c),{},Object(R.a)({},e.target.name,e.target.value)))};if(a)return Object(U.jsx)(_.a,{to:"/"});return Object(U.jsxs)("div",{className:"container align-middle mt-5",children:[Object(U.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),t(i,l)}(e)},children:[Object(U.jsx)("h1",{children:"Login"}),Object(U.jsx)("p",{children:"Login to your account"}),Object(U.jsxs)("div",{className:"form-group mt-4",children:[Object(U.jsx)("label",{htmlFor:"email",children:"Email address"}),Object(U.jsx)("input",{type:"email",className:"form-control",id:"email",name:"email","aria-describedby":"emailHelp",placeholder:"Enter email",value:i,onChange:function(e){return j(e)},required:!0})]}),Object(U.jsxs)("div",{className:"form-group mb-3",children:[Object(U.jsx)("label",{htmlFor:"password",children:"Password"}),Object(U.jsx)("input",{type:"password",className:"form-control",id:"password",name:"password",placeholder:"Password",value:l,onChange:function(e){return j(e)},required:!0})]}),Object(U.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Login"})]}),Object(U.jsxs)("p",{className:"mt-3",children:["Don't have an account? ",Object(U.jsx)(S.b,{to:"/signup",children:"Sign Up"})]}),Object(U.jsxs)("p",{className:"mt-3",children:["Forgot your password? ",Object(U.jsx)(S.b,{to:"/reset-password",children:"Reset Password"})]}),Object(U.jsx)(D,{})]})})),G=Object(c.b)((function(e){return{successes:e.auth.successes}}),{})((function(e){var t=e.successes;return Object(U.jsx)("ul",{className:"p-0",children:t.map((function(e){return Object(U.jsx)("li",{className:"list-group-item list-group-item-success mb-1 my-0",children:e})}))})})),H=Object(c.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{signup:function(e,t,a,n,s,r){return function(){var c=Object(k.a)(I.a.mark((function c(o){var i,l;return I.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:i={headers:{"Content-Type":"application/json"}},l=JSON.stringify({email:e,username:t,name:a,last_name:n,password:s,re_password:r}),E.a.post("".concat(F,"auth/users/"),l,i).then((function(t){o({type:m,payload:e})})).catch((function(e){o({type:p,payload:e.response.data})}));case 3:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}})((function(e){var t=e.signup,a=e.isAuthenticated,s=Object(n.useState)(!1),r=Object(A.a)(s,2),c=r[0],o=(r[1],Object(n.useState)({email:"",username:"",name:"",last_name:"",password:"",re_password:""})),i=Object(A.a)(o,2),l=i[0],j=i[1],d=l.email,m=l.username,p=l.name,b=l.last_name,h=l.password,O=l.re_password,f=function(e){j(Object(u.a)(Object(u.a)({},l),{},Object(R.a)({},e.target.name,e.target.value)))};return c||a?Object(U.jsx)(_.a,{to:"/"}):Object(U.jsxs)("div",{className:"container align-middle mt-5",children:[Object(U.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),h===O&&(t(d,m,p,b,h,O),j({email:"",username:"",name:"",last_name:"",password:"",re_password:""}))}(e)},children:[Object(U.jsx)("h1",{children:"Signup"}),Object(U.jsx)("p",{children:"Create an account"}),Object(U.jsxs)("div",{className:"form-group mt-4",children:[Object(U.jsx)("label",{htmlFor:"email",children:"Email address"}),Object(U.jsx)("input",{type:"email",className:"form-control",id:"email",name:"email",placeholder:"Enter email",value:d,onChange:function(e){return f(e)},required:!0})]}),Object(U.jsxs)("div",{className:"form-group",children:[Object(U.jsx)("label",{htmlFor:"username",children:"Username"}),Object(U.jsx)("input",{type:"text",className:"form-control",id:"username",name:"username",placeholder:"Enter username",value:m,onChange:function(e){return f(e)},required:!0})]}),Object(U.jsxs)("div",{className:"form-group",children:[Object(U.jsx)("label",{htmlFor:"name",children:"Name"}),Object(U.jsx)("input",{type:"text",className:"form-control",id:"name",name:"name",placeholder:"Enter name",value:p,onChange:function(e){return f(e)},required:!0})]}),Object(U.jsxs)("div",{className:"form-group",children:[Object(U.jsx)("label",{htmlFor:"last_name",children:"Last name"}),Object(U.jsx)("input",{type:"text",className:"form-control",id:"last_name",name:"last_name",placeholder:"Enter last name",value:b,onChange:function(e){return f(e)},required:!0})]}),Object(U.jsxs)("div",{className:"form-group",children:[Object(U.jsx)("label",{htmlFor:"password",children:"Password"}),Object(U.jsx)("input",{type:"password",className:"form-control",id:"password",name:"password",placeholder:"Password",value:h,onChange:function(e){return f(e)},required:!0})]}),Object(U.jsxs)("div",{className:"form-group mb-3",children:[Object(U.jsx)("label",{htmlFor:"re_password",children:"Retype password"}),Object(U.jsx)("input",{type:"password",className:"form-control",id:"re_password",name:"re_password",placeholder:"Password",value:O,onChange:function(e){return f(e)},required:!0})]}),Object(U.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Sign up"})]}),Object(U.jsxs)("p",{className:"mt-3",children:["Have an account? ",Object(U.jsx)(S.b,{to:"/login",children:"Login"})]}),Object(U.jsx)(G,{}),Object(U.jsx)(D,{})]})})),V=function(){return Object(U.jsx)("div",{children:"Reset password"})},W=function(){return Object(U.jsx)("div",{children:"Reset password Confirm"})},z=Object(c.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{logout:function(){return function(){var e=Object(k.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:O});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.isAuthenticated,a=e.logout;return Object(U.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light ps-4",children:[Object(U.jsx)(S.b,{className:"navbar-brand",to:"/",children:"Tweety"}),Object(U.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(U.jsx)("span",{className:"navbar-toggler-icon"})}),Object(U.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(U.jsxs)("ul",{className:"navbar-nav",children:[Object(U.jsx)("li",{className:"nav-item active",children:Object(U.jsx)(S.b,{className:"nav-link",to:"/",children:"Home"})}),t?Object(U.jsx)("li",{className:"nav-item",children:Object(U.jsx)(S.b,{className:"nav-link",to:"/",onClick:a,children:"Logout"})}):Object(U.jsxs)(n.Fragment,{children:[Object(U.jsx)("li",{className:"nav-item",children:Object(U.jsx)(S.b,{className:"nav-link",to:"/login",children:"Login"})}),Object(U.jsx)("li",{className:"nav-item",children:Object(U.jsx)(S.b,{className:"nav-link",to:"/signup",children:"Signup"})})]})]})})]})})),B=function(e){return Object(U.jsxs)("div",{children:[Object(U.jsx)(z,{}),e.children]})};var M=function(){return T(),Object(U.jsx)(c.a,{store:w,children:Object(U.jsx)(S.a,{children:Object(U.jsx)(B,{children:Object(U.jsxs)(_.d,{children:[Object(U.jsx)(_.b,{exact:!0,path:"/",component:P}),Object(U.jsx)(_.b,{exact:!0,path:"/login",component:J}),Object(U.jsx)(_.b,{exact:!0,path:"/signup",component:H}),Object(U.jsx)(_.b,{exact:!0,path:"/activate/:uid/:token",component:q}),Object(U.jsx)(_.b,{exact:!0,path:"/reset-password",component:V}),Object(U.jsx)(_.b,{exact:!0,path:"/password/reset/confirm/:uid/:token",component:W})]})})})})};r.a.render(Object(U.jsx)(c.a,{store:w,children:Object(U.jsx)(M,{})}),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.c5c37de2.chunk.js.map